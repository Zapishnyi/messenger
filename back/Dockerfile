FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

RUN npm run build
RUN ls -la dist  # optional debug step

CMD ["node", "-r", "dotenv/config", "dist/main.js"]